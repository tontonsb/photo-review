import{F as d,c as y,f as l,S as g,I as S,P as b,d as E,e as I,b as m,V as p,M as v,T as x,X as F,a as G}from"./XYZ-DCrBMTqa.js";import{G as M}from"./GeoJSON-Bzl9OLMf.js";import{d as A,a as P,b as k}from"./displayImageWithScale-v-RcFFV7.js";const L=new Date,h=document.querySelector("form"),D=h.querySelector("[name=reviewing_duration_ms]");h.addEventListener("submit",()=>D.value=new Date-L);function q(s,o,a){const r=document.querySelector(s);r.querySelectorAll(".js-close").forEach(e=>e.addEventListener("click",n=>r.close())),document.querySelectorAll(o).forEach(e=>e.addEventListener("click",n=>r.showModal())),a&&r.showModal()}function W(s,o,a,r,e,n){const t=[o.lon,o.lat],i=new d({geometry:new y(l(t))});return i.setStyle(new g({image:new S({src:r,scale:.125,rotation:a})})),f(s,i,t,e,n)}function _(s,o,a,r){const e={north:parseFloat(o.north),east:parseFloat(o.east),south:parseFloat(o.south),west:parseFloat(o.west)},n=new d({geometry:new b([[l([e.west,e.north]),l([e.east,e.north]),l([e.east,e.south]),l([e.west,e.south]),l([e.west,e.north])]])});n.setStyle(new g({stroke:new E({color:"#b833ff",width:2}),fill:new I({color:"#b833ff22"})}));const t=[(e.east+e.west)/2,(e.north+e.south)/2];return f(s,n,t,a,r)}function f(s,o,a,r,e){const n=new m({source:new p({format:new M,url:r})}),t=new v({target:s,layers:[new x({source:new F({attributions:["Powered by Esri","Source: Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"],url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",maxZoom:20})}),n,new m({source:new p({features:[o]})})],view:new G({center:l(a),zoom:14})});return t.on("click",function(i){const u=t.getEventPixel(i.originalEvent),c=[];t.forEachFeatureAtPixel(u,w=>{c.push({path:w.get("path"),url:w.get("url")})}),e(c)}),t.on("pointermove",function(i){if(i.dragging)return;t.getTargetElement().style.cursor="";const u=t.getEventPixel(i.originalEvent);t.forEachFeatureAtPixel(u,c=>{if(c.get("path")&&c.get("url"))return t.getTargetElement().style.cursor="pointer",!0})}),t}const T={pin:W,box:_};window.bootInfobox=q;window.makeMapWith=T;window.displayImage=A;window.displayImageOnMap=P;window.displayImageWithScale=k;
