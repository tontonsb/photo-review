import{V as y,P as E,M as f,T as G,X as d,a as S,b as P,f as b}from"./XYZ-BJAijdX9.js";import{G as v}from"./GeoJSON-TBXCKDd0.js";function x(h,p,w){const i=new y({format:new v,url:p});i.on("featuresloadend",()=>i.forEachFeature(e=>{const o=e.getGeometry();if(o.getType()!=="Point")return;const r=e.get("width_guess_meters"),n=e.get("height_guess_meters"),g=e.get("bearing_degrees");if(!r||!n||!g)return;const s=o.getCoordinates(),a=s[0]-r/2,c=s[1]+n/2,l=s[0]+r/2,u=s[1]-n/2,m=new E([[[a,c],[a,u],[l,u],[l,c],[a,c]]]);m.rotate(-g*Math.PI/180,s),e.setGeometry(m)}));const t=new f({target:h,layers:[new G({source:new d({attributions:["Powered by Esri","Source: Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"],url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",maxZoom:20})}),new S({source:i})],view:new P({center:b([23.54238,56.87841]),zoom:12})});return t.on("click",function(e){const o=t.getEventPixel(e.originalEvent),r=[];t.forEachFeatureAtPixel(o,n=>{r.push({path:n.get("path"),url:n.get("url")})}),w(r)}),t.on("pointermove",function(e){if(e.dragging)return;t.getTargetElement().style.cursor="";const o=t.getEventPixel(e.originalEvent);t.forEachFeatureAtPixel(o,r=>{if(r.get("path")&&r.get("url"))return t.getTargetElement().style.cursor="pointer",!0})}),t}window.showFeaturesOnMap=x;
